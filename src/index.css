@tailwind base;
@tailwind components;
@tailwind utilities;

/* ============================================
   DESIGN TOKENS - CSS Custom Properties
   ============================================
   Centralized design system for consistent theming.
   All color, spacing, and timing values defined here.
   ============================================ */

@layer base {
  :root {
    /* ===================
       COLOR TOKENS
       =================== */

    /* Background colors */
    --color-bg-primary: 255 255 255;           /* white */
    --color-bg-secondary: 243 244 246;         /* gray-100 */
    --color-bg-tertiary: 229 231 235;          /* gray-200 */
    --color-bg-inverted: 0 0 0;                /* black */

    /* Text colors */
    --color-text-primary: 17 24 39;            /* gray-900 */
    --color-text-secondary: 75 85 99;          /* gray-600 */
    --color-text-tertiary: 107 114 128;        /* gray-500 */
    --color-text-muted: 156 163 175;           /* gray-400 */
    --color-text-inverted: 255 255 255;        /* white */

    /* Border colors */
    --color-border-primary: 229 231 235;       /* gray-200 */
    --color-border-secondary: 209 213 219;     /* gray-300 */
    --color-border-strong: 17 24 39;           /* gray-900 */

    /* Interactive states */
    --color-hover-bg: 243 244 246;             /* gray-100 */
    --color-focus-ring: 156 163 175;           /* gray-400 */

    /* Accent (selection, loader) */
    --color-accent: 59 130 246;                /* blue-500 */
    --color-loader: 52 152 219;                /* custom blue */

    /* ===================
       SPACING TOKENS
       =================== */
    --spacing-page-x: 1.5rem;                  /* 24px - px-6 */
    --spacing-page-y: 4rem;                    /* 64px - py-16 */
    --spacing-section: 4rem;                   /* 64px - space-y-16 */
    --spacing-content: 2rem;                   /* 32px - gap-8 */
    --spacing-element: 1rem;                   /* 16px - gap-4 */

    /* ===================
       LAYOUT TOKENS
       =================== */
    --container-max-width: 56rem;              /* max-w-4xl (896px) */

    /* ===================
       TRANSITION TOKENS
       =================== */
    --transition-fast: 200ms;
    --transition-default: 300ms;
    --transition-slow: 500ms;
    --transition-easing: cubic-bezier(0.4, 0, 0.2, 1);
  }

  /* Dark mode overrides */
  .dark {
    /* Background colors */
    --color-bg-primary: 17 24 39;              /* gray-900 */
    --color-bg-secondary: 31 41 55;            /* gray-800 */
    --color-bg-tertiary: 55 65 81;             /* gray-700 */
    --color-bg-inverted: 255 255 255;          /* white */

    /* Text colors */
    --color-text-primary: 243 244 246;         /* gray-100 */
    --color-text-secondary: 209 213 219;       /* gray-300 */
    --color-text-tertiary: 156 163 175;        /* gray-400 */
    --color-text-muted: 107 114 128;           /* gray-500 */
    --color-text-inverted: 17 24 39;           /* gray-900 */

    /* Border colors */
    --color-border-primary: 55 65 81;          /* gray-700 */
    --color-border-secondary: 75 85 99;        /* gray-600 */
    --color-border-strong: 243 244 246;        /* gray-100 */

    /* Interactive states */
    --color-hover-bg: 31 41 55;                /* gray-800 */
    --color-focus-ring: 156 163 175;           /* gray-400 */
  }

  body {
    font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
  }
}

/* Simple smooth scrolling */
html {
  scroll-behavior: smooth;
}

/* Theme transition effect */
html.theme-transitioning,
html.theme-transitioning * {
  transition: background-color 0.5s ease, color 0.5s ease, border-color 0.5s ease !important;
}

html.theme-transitioning::after {
  content: '';
  position: fixed;
  inset: 0;
  background: rgb(var(--color-bg-primary));
  opacity: 0;
  pointer-events: none;
  z-index: 9999;
  animation: theme-fade 0.5s ease;
}

@keyframes theme-fade {
  0% { opacity: 0.15; }
  100% { opacity: 0; }
}

/* Clean selection */
::selection {
  background: rgb(59 130 246 / 0.2);
}

/* Loader animation */
.loader {
  border: 2px solid #f3f3f3;
  border-top: 2px solid #3498db;
  border-radius: 50%;
  width: 24px;
  height: 24px;
  animation: spin 1s linear infinite;
  margin: 0 auto;
}

@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

/* Fade-in animation */
.fade-in {
  animation: fadeIn 0.5s ease-in-out;
}

@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

/* ============================================
   SKELETON LOADING ANIMATIONS
   ============================================ */

/* Shimmer effect for skeleton screens */
@keyframes shimmer {
  0% {
    background-position: -200% 0;
  }
  100% {
    background-position: 200% 0;
  }
}

.skeleton-shimmer {
  background: linear-gradient(
    90deg,
    rgb(var(--color-bg-tertiary)) 0%,
    rgb(var(--color-bg-secondary)) 50%,
    rgb(var(--color-bg-tertiary)) 100%
  );
  background-size: 200% 100%;
  animation: shimmer 1.5s ease-in-out infinite;
}

/* ============================================
   ENHANCED CARD INTERACTIONS
   ============================================ */

/* Card with lift effect on hover */
.card-interactive {
  transition: transform var(--transition-default) var(--transition-easing),
              box-shadow var(--transition-default) var(--transition-easing);
}

.card-interactive:hover {
  transform: translateY(-4px);
}

/* Card shadow levels */
.card-shadow {
  box-shadow: 0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1);
  transition: box-shadow var(--transition-default) var(--transition-easing);
}

.card-shadow:hover {
  box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
}

.dark .card-shadow {
  box-shadow: 0 1px 3px 0 rgb(0 0 0 / 0.3), 0 1px 2px -1px rgb(0 0 0 / 0.3);
}

.dark .card-shadow:hover {
  box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.4), 0 4px 6px -4px rgb(0 0 0 / 0.4);
}

/* ============================================
   SCROLL PROGRESS INDICATOR
   ============================================ */

.scroll-progress {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgb(var(--color-bg-inverted));
  transform-origin: left;
  z-index: 1;
  transition: opacity var(--transition-fast) var(--transition-easing);
}

.scroll-progress::after {
  content: '';
  position: absolute;
  right: 0;
  top: 0;
  height: 100%;
  width: 100px;
  background: linear-gradient(
    90deg,
    transparent,
    rgb(var(--color-bg-inverted) / 0.3)
  );
}

/* ============================================
   NOTE/POST PROSE STYLES
   ============================================
   Typography for rendered markdown content.
   Uses design tokens for theme consistency.
   ============================================ */

.prose-note {
  line-height: 1.75;
  color: rgb(var(--color-text-secondary));
}

.prose-note > * + * {
  margin-top: 1.5rem;
}

/* Headings */
.prose-note h1,
.prose-note h2,
.prose-note h3,
.prose-note h4 {
  color: rgb(var(--color-text-primary));
  font-weight: 700;
  line-height: 1.3;
  margin-top: 2.5rem;
  margin-bottom: 1rem;
}

.prose-note h1 { font-size: 1.875rem; }
.prose-note h2 { font-size: 1.5rem; }
.prose-note h3 { font-size: 1.25rem; }
.prose-note h4 { font-size: 1.125rem; }

.prose-note > h1:first-child,
.prose-note > h2:first-child,
.prose-note > h3:first-child {
  margin-top: 0;
}

/* Paragraphs */
.prose-note p {
  margin-top: 1.25rem;
  margin-bottom: 1.25rem;
}

/* Links */
.prose-note a {
  color: rgb(var(--color-text-primary));
  text-decoration: underline;
  text-underline-offset: 2px;
  transition: color var(--transition-fast) var(--transition-easing);
}

.prose-note a:hover {
  color: rgb(var(--color-accent));
}

/* Strong and emphasis */
.prose-note strong {
  color: rgb(var(--color-text-primary));
  font-weight: 600;
}

/* Lists */
.prose-note ul,
.prose-note ol {
  padding-left: 1.5rem;
  margin-top: 1.25rem;
  margin-bottom: 1.25rem;
}

.prose-note ul { list-style-type: disc; }
.prose-note ol { list-style-type: decimal; }

.prose-note li {
  margin-top: 0.5rem;
  margin-bottom: 0.5rem;
}

.prose-note li::marker {
  color: rgb(var(--color-text-muted));
}

/* Blockquotes */
.prose-note blockquote {
  border-left: 3px solid rgb(var(--color-border-strong));
  padding-left: 1rem;
  margin-top: 1.5rem;
  margin-bottom: 1.5rem;
  color: rgb(var(--color-text-tertiary));
  font-style: italic;
}

/* Inline code */
.prose-note code {
  font-family: ui-monospace, SFMono-Regular, 'SF Mono', Menlo, Consolas, monospace;
  font-size: 0.875em;
  color: rgb(var(--color-text-primary));
  background: rgb(var(--color-bg-secondary));
  padding: 0.2em 0.4em;
  border-radius: 0.25rem;
}

/* Code blocks */
.prose-note pre {
  background: rgb(var(--color-bg-secondary));
  border: 1px solid rgb(var(--color-border-primary));
  border-radius: 0.5rem;
  padding: 1rem 1.25rem;
  overflow-x: auto;
  margin-top: 1.5rem;
  margin-bottom: 1.5rem;
}

.prose-note pre code {
  background: transparent;
  padding: 0;
  font-size: 0.875rem;
  line-height: 1.7;
}

/* Horizontal rules */
.prose-note hr {
  border: none;
  border-top: 1px solid rgb(var(--color-border-primary));
  margin-top: 2rem;
  margin-bottom: 2rem;
}

/* Tables */
.prose-note table {
  width: 100%;
  border-collapse: collapse;
  margin-top: 1.5rem;
  margin-bottom: 1.5rem;
  font-size: 0.875rem;
}

.prose-note th {
  color: rgb(var(--color-text-primary));
  font-weight: 600;
  text-align: left;
  padding: 0.75rem 1rem;
  border-bottom: 2px solid rgb(var(--color-border-primary));
}

.prose-note td {
  padding: 0.75rem 1rem;
  border-bottom: 1px solid rgb(var(--color-border-primary));
}

.prose-note tr:last-child td {
  border-bottom: none;
}

/* Images */
.prose-note img {
  max-width: 100%;
  border-radius: 0.5rem;
  margin-top: 1.5rem;
  margin-bottom: 1.5rem;
}

/* ============================================
   PRINT STYLES
   ============================================
   Optimized for printing portfolio/resume.
   ============================================ */

@media print {
  /* Reset colors for print */
  :root {
    --color-bg-primary: 255 255 255;
    --color-text-primary: 0 0 0;
    --color-text-secondary: 50 50 50;
    --color-border-primary: 200 200 200;
  }

  /* Hide non-essential elements */
  .scroll-progress,
  header nav,
  footer,
  button[aria-label="Back to top"],
  [aria-label*="theme"],
  [aria-label*="menu"] {
    display: none !important;
  }

  /* Reset backgrounds and shadows */
  * {
    background: transparent !important;
    box-shadow: none !important;
    text-shadow: none !important;
  }

  /* Ensure text is black */
  body {
    color: #000 !important;
    font-size: 12pt;
    line-height: 1.5;
  }

  /* Show URLs for links */
  a[href^="http"]:after {
    content: " (" attr(href) ")";
    font-size: 0.8em;
    color: #666;
    word-wrap: break-word;
  }

  /* Don't show URL for internal links */
  a[href^="/"]:after,
  a[href^="#"]:after {
    content: "";
  }

  /* Ensure images print properly */
  img {
    max-width: 100% !important;
    page-break-inside: avoid;
  }

  /* Avoid page breaks inside important elements */
  h1, h2, h3, h4, h5, h6 {
    page-break-after: avoid;
    page-break-inside: avoid;
  }

  p, blockquote, ul, ol, dl, table, pre {
    page-break-inside: avoid;
  }

  /* Keep headings with content */
  h1, h2, h3 {
    orphans: 3;
    widows: 3;
  }

  /* Page margins */
  @page {
    margin: 2cm;
  }

  /* Header styling for print */
  header {
    position: static !important;
    border-bottom: 2px solid #000 !important;
    padding-bottom: 1rem !important;
    margin-bottom: 2rem !important;
  }

  /* Card styling for print */
  .card-shadow,
  .card-interactive {
    border: 1px solid #ccc !important;
    padding: 1rem !important;
    margin-bottom: 1rem !important;
  }

  /* Grid layout for print - single column */
  .grid {
    display: block !important;
  }

  .grid > * {
    margin-bottom: 1rem !important;
  }
}
